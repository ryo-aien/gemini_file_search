# 既知の問題

このドキュメントでは、現在の実装における既知の問題と制限事項を記載しています。

## 1. Chunking設定のカスタマイズ不可

**ステータス**: 未解決

**説明**:
ファイルアップロード時のチャンク設定（`max_tokens_per_chunk`, `max_overlap_tokens`）をカスタマイズできません。現在はGoogle APIのデフォルト値を使用しています。

**デフォルト値**:
- Max Tokens Per Chunk: 200
- Max Overlap Tokens: 20

**影響**:
- ほとんどのユースケースではデフォルト値で十分機能します
- 非常に大きなドキュメントや特殊な要件がある場合に制限となる可能性があります

**回避策**:
なし（現時点ではデフォルト値を使用）

**技術的詳細**:
Google APIの`importFile`エンドポイントが期待する`chunkingConfig`のフィールド名が、公式ドキュメントと実際のAPI実装で異なるようです。以下のフィールド名を試しましたが、いずれもエラーとなりました：

- `maxTokensPerChunk` / `maxOverlapTokens` (キャメルケース)
- `max_tokens_per_chunk` / `max_overlap_tokens` (スネークケース)

エラーメッセージ:
```
Invalid JSON payload received. Unknown name "maxTokensPerChunk" at 'chunking_config': Cannot find field.
```

**将来の対応**:
- Google AI チームに正確なAPIフィールド名を確認
- 公式Python SDKのソースコードを調査
- 代替APIエンドポイントの調査

---

## 2. 検索機能の未実装

**ステータス**: 未実装（仕様）

**説明**:
ドキュメントの検索機能は現在のバージョンには含まれていません。

**理由**:
検索機能にはGemini モデルとの統合が必要で、以下が含まれます：
- モデルへのクエリ送信
- コンテキストの構築
- 検索結果のランキング

**影響**:
- ドキュメントのアップロード・管理は可能
- 実際の検索クエリは実行できない

**回避策**:
Google AIのPlaygroundやSDKを直接使用して検索を実行

**将来の対応**:
次のバージョンで実装予定（ロードマップ参照）

---

## 3. カスタムメタデータの制限

**ステータス**: 一部実装

**説明**:
カスタムメタデータの設定・編集機能が限定的です。

**現在の制限**:
- Web UIからメタデータを設定できない
- メタデータによるフィルタリングが未実装

**影響**:
- 基本的なアップロード・管理には影響なし
- 高度なドキュメント分類・検索に制限

**回避策**:
APIを直接使用（cURLやPythonスクリプト）

---

## 4. 大きなファイル（>100MB）のアップロード

**ステータス**: Google API制限

**説明**:
Google APIの制限により、100MBを超えるファイルはアップロードできません。

**制限値**: 100MB（104,857,600 バイト）

**影響**:
- 大きなPDFや動画ファイルのアップロード不可

**回避策**:
- ファイルを分割して複数のドキュメントとしてアップロード
- ファイルサイズを圧縮

**将来の対応**:
Google側のAPI制限緩和を待つ

---

## 5. 並列アップロードの制限

**ステータス**: 未実装

**説明**:
複数ファイルの同時アップロードができません。

**現在の動作**:
ファイルは1つずつ順次アップロード

**影響**:
- 多数のファイルをアップロードする場合に時間がかかる

**回避策**:
なし

**将来の対応**:
バッチアップロード機能を実装予定

---

## トラブルシューティング

各問題の詳細な解決方法は [TROUBLESHOOTING.md](TROUBLESHOOTING.md) を参照してください。

## フィードバック

問題や改善提案は以下で受け付けています：
- GitHub Issues: https://github.com/yourusername/gemini-file-search/issues

---

最終更新: 2025-11-23
